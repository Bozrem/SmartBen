<AlarmDisplay>:
    BoxLayout:
        canvas.before:
            Color:
                rgba: app.background_color
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            background_color: 0, 0, 0, 0 # Transparent
            size_hint: (1, 1)
            text: "Go to Alarm Screen" 
            on_release: app.root.current = 'alarm_screen'

<AlarmScreen>:
    BoxLayout: 
        canvas.before:
            Color:
                rgba: app.background_color
            Rectangle:
                pos: self.pos
                size: self.size
        orientation: 'vertical'

        BoxLayout: # Header bar at the top of selector half
            size_hint_y: .1
            orientation: 'horizontal'
            # Header with add button
            
            ImgBtn:
                size_hint_y: 1
                on_release: app.root.current = 'main'
                background_color: 0, 0, 0, 0
                id: back_icon
                source: 'assets/icons/control/back_light.png' 
            Label: 
                size_hint_x: .9
                text: "Next alarm in 3 hours 16 minutes"
                color: app.text_color
                font_size: app.small_font_size
                id: next_alarm_text
            ImgBtn:
                size_hint_y: 1
                on_release: root.add_alarm()
                background_color: 0, 0, 0, 0  # Transparent
                id: plus_icon
                source: 'assets/icons/control/add_light.png' 

        RecycleView:  # Scrolling selector
            id: alarm_list
            viewclass: 'AlarmItemWidget'
            size_hint_y: 0.9
            RecycleBoxLayout:
                default_size: None, dp(50)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: dp(10)  # Add spacing between items
                padding: dp(10)  # Add padding around the list


<AlarmItemWidget@BoxLayout>:
    orientation: 'horizontal'
    padding: 5
    Label:
        text: root.alarm_name
        size_hint_x: 0.5 
        color: app.text_color
        font_size: app.small_font_size
    Label:
        text: root.alarm_time
        size_hint_x: 0.3
        color: app.text_color
        font_size: app.small_font_size
    Button:
        text: "Edit"
        size_hint_x: 0.2
        on_release: app.root.get_screen('alarm_screen').open_editor(self.parent.alarm_item)
        color: app.text_color
        font_size: app.small_font_size

<EditorPopup@Popup>:
    title: 'Edit Alarm'
    size_hint: 0.8, 0.4
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10
        
        BoxLayout:
            orientation: 'horizontal'
            Label:
                text: 'Name:'
            TextInput:
                id: name_input
                multiline: False

        BoxLayout:
            orientation: 'horizontal'
            Label:
                text: 'Time:'
            TextInput:
                id: time_input
                multiline: False

        Button:
            text: 'Save Changes'
            size_hint_y: 0.3
            on_release: root.save_changes()


<ImgBtn>:
    size_hint: None, None
    size: 75, 75  # Adjust size as needed